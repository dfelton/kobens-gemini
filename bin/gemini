#!/usr/bin/env php
<?php

require \dirname(__DIR__).'/vendor/autoload.php';

use Kobens\Core\Config;
use Kobens\Gemini\Command\Command\Market\{BookKeeper as MarketBookKeeper, Watcher};
use Kobens\Gemini\Command\Command\Order\BookKeeper as OrderBookKeeper;
use Kobens\Gemini\Command\Command\Order\Placement\{Cancel, CancelAll, NewOrder};
use Kobens\Gemini\Command\Command\Order\Status\ActiveOrders;
use Symfony\Component\Console\Application;

try {
    new Config(
        \dirname(__DIR__).'/env/config.xml',
        \dirname(__DIR__)
    );
} catch (Exception $e) {
    exit('Config not initialized properly.');
}

$application = new Application();

$application->add(new ActiveOrders());
$application->add(new Cancel());
$application->add(new CancelAll());
$application->add(new MarketBookKeeper());
$application->add(new NewOrder());
$application->add(new OrderBookKeeper());
$application->add(new Watcher());

$application->run();

